<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Lista para verificação de boas práticas alimentares</title>
</head>

<body>
    <br><br><br><br>
    <div class="container border border-dark border-top-1 border-bottom-1 col-md-14 border-warning">
        <div class="row">
            <div class="col-md-12"><br><br></div>
        </div>
        <div class="row">
            <div class="col-md-12" align="center">
                <h2>Lista para verificação de boas práticas alimentares</h2>
            </div>
        </div>
        <br>
        <!-- Here we are making an iteration through a 2d array consisting of various objects and its atributes
      meanwhile printing the header determined to each section, with that we will print all of the atributes
      that are stored inside the determined object array-->

        <form #f="ngForm" (ngSubmit)="onSubmit()">
            <div *ngFor="let topic of iteratorArray ;let topicNum=index">
                <div class="row">
                    <div class="col-md-9 " align="center">
                        <h5>{{topicHeaders[topicNum]}}</h5>
                    </div>
                    <div class="col-md-1 " align="center">
                        <h5></h5>
                    </div>
                    <div class="col-md-1 " align="center">
                        <h5></h5>
                    </div>
                </div>
                <div class="row" *ngFor="let question of topic;let questNum=index;">
                    <!-- Section header -->
                    <div class="col-md-9" align="left">{{iteratorArray[topicNum][questNum].question}}</div>

                    <!-- Questions -->
                    <div class="col-md-2" align="center" valign="center" *ngIf="isOtherQuestions(topicNum, questNum)">
                        Não
                        <!-- Rounded switch -->
                        <label class=" align-middle switch">
                <input type="checkbox"
                  name="{{iteratorArray[topicNum][questNum].question}}"
                  [value]="true"
                  [(ngModel)]= "iteratorArray[topicNum][questNum].answer">
                <span class="slider round"></span>
              </label> Sim
                    </div>

                    <!-- Other questions -->
                    <div class="col-md-2" align="center" *ngIf="isNotRequiredQuestions(topicNum, questNum)">
                        Não
                        <label class=" align-middle switch">
                <input type="checkbox"
                  name="{{iteratorArray[topicNum][questNum].question}}"
                  [value]="true"
                  [(ngModel)]= "iteratorArray[topicNum][questNum].answer">
                <span class="slider round"></span>
              </label> Sim
                    </div>

                    <!-- Commentary options for 2nd half of questions -->
                    <div class="col-md-2">
                        <input required type="text" placeholder="Resposta" *ngIf="isRequiredQuestions(topicNum,questNum)" [(ngModel)]="iteratorArray[topicNum][questNum].commentary" name="{{iteratorArray[topicNum][questNum].question}}">
                    </div>
                </div>

                <div class="row">
                    <!-- Topics observation -->
                    <div class="col-md-8" align="left">Observações?</div>
                    <div class="col-md-4">
                        <div class="md-form">
                            <textarea align="center" type="text" id="form7" class="md-textarea" placeholder="Observações" name="{{commentaries[topicNum]}}" [(ngModel)]="commentaries[topicNum].commentary">
                </textarea>
                            <label for="form7"></label>
                        </div>
                    </div>
                </div>
                <br>
            </div>

            <div class="col-md-12 center" align="center">
                <h4>Adicionar Imagem</h4>
                <div *ngIf="base64Array.length == 0">
                    <label for="files" class="btn btn-warning btn-rounded waves-light">Selecione a imagem</label>
                    <input id="files" style="visibility:hidden;" type="file" accept="image/jpg, image/jpeg, image/png" (change)="changeListener($event)" />
                </div>
                <div *ngIf="base64Array.length > 0 ">
                    <label for="files" class="btn btn-warning btn-rounded waves-light">Selecione outra imagem</label>
                    <input id="files" style="visibility:hidden;" type="file" accept="image/jpg, image/jpeg, image/png" (change)="changeListener($event)" />
                    <div *ngFor="let base of base64Array">
                        <div *ngIf="base != undefined">
                            <img src={{base}} style="height: auto; max-width: 550px; width: auto;" />
                            <br>
                            <br>
                        </div>

                    </div>
                    <br>
                </div>
            </div>

            <div class="row">
                <div class="col-md-1"></div>
                <!-- Back button -->
                <div class="col-md-2">
                    <a href="/checklist" class="btn btn-outline-warning waves-effect backButton">
                        <span class="glyphicon glyphicon-chevron-left " aria-hidden="false"></span>
                        <i class="fa fa-arrow-circle-o-left" aria-hidden="true">
            </i>Voltar</a>
                </div>
                <div class="col-md-3"></div>
                <div class="col-md-3"></div>
                <!-- Send button -->
                <div class="col-md-2">
                    <button type="submit" class="btn btn-warning btn-rounded waves-light" (ngSubmit)="onSubmit()" href="/checklist" [disabled]="!f.form.valid" (click)="savePost()">
              Enviar
            </button>
                </div>
            </div>
        </form>

        <div class="row">
            <div class="col-md-12"><br></div>
        </div>
    </div>
    <br>
</body>

</html>